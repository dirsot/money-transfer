DROP TABLE IF EXISTS ACCOUNT;
DROP TABLE IF EXISTS ACCOUNT_HISTORY;

CREATE TABLE ACCOUNT (
    ID BIGINT PRIMARY KEY AUTO_INCREMENT,
    IBAN VARCHAR(25) NOT NULL,
    BALANCE DECIMAL(19, 2) DEFAULT 0 CHECK (BALANCE >= 0));

CREATE TABLE ACCOUNT_HISTORY (ID BIGINT PRIMARY KEY AUTO_INCREMENT,
    ACCOUNT_ID BIGINT,
    DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    AMOUNT DECIMAL(19, 2) DEFAULT 0,
    ORIGIN VARCHAR(25) NOT NULL);

INSERT INTO ACCOUNT(IBAN, BALANCE)
VALUES('accountIban1', 100),
      ('accountIban2', 200),
      ('accountIban3', 300),
      ('accountIban4', 400);

INSERT INTO ACCOUNT_HISTORY(ACCOUNT_ID, AMOUNT, ORIGIN,DATE)
VALUES(1, 20,'test','2020-01-01 00:00:01'),
      (1, -10,'test','2020-01-02 00:00:01'),
      (2, 1000,'test','2020-01-03 00:00:01');

